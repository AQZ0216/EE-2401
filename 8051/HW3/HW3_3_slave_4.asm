Init:	MOV 	SCON, #70H	;mode 2, SM2=1, REN=1
	ANL 	PCON, #7FH	;SMOD = 0
LOOP:	LJMP	OUTPUT
	LJMP	LOOP

OUTPUT:	JNB	RI, $
	CLR	RI
	MOV	A, SBUF		;get received byte
	CJNE	A, #29H, SKIP1
	CLR	SM2
	JNB	RI, $
	CLR	RI
	MOV	P0, SBUF
	SETB	SM2
	RET
SKIP1:	CJNE	A, #2AH, SKIP2
	CLR	SM2
	JNB	RI, $
	CLR	RI
	MOV	P1, SBUF
	SETB	SM2
	RET
SKIP2:	CJNE	A, #2BH, EXIT
	CLR	SM2
	JNB	RI, $
	CLR	RI
	MOV	P2, SBUF
	SETB	SM2
EXIT:	RET

