	ORG	0000H
	LJMP	Main
	ORG 	000BH
	LJMP	T0ISR
	ORG	0030H
Main:	MOV	TMOD, #01H	;T0 MODE 1
	MOV	IE, #82H
	MOV	P1, #77H	;01110111
	SETB	TF0
	SJMP	$		;DO NOTHING

T0ISR:	CLR	TR0
	MOV	TH0, #0CFH	;12500us DELAY
	MOV	TL0, #2CH
	SETB	TR0
	JB	P1.0, SKIP1
	MOV	A, 30H
	LJMP	EXIT		;1110
SKIP1:	JB	P1.1, SKIP2
	MOV	A, 30H
	SWAP	A
	LJMP	EXIT		;1101
SKIP2:	JB	P1.2, SKIP3
	MOV	A, 31H
	LJMP	EXIT		;1011
SKIP3:	MOV	A, 31H
	SWAP	A
	LJMP	EXIT		;0111
EXIT:	LCALL	OUTCHR
	MOV	A, P1
	RL	A
	MOV	P1, A
	RETI

OUTCHR:	JB 	A.3, H8_f
	JB 	A.2, H4_7
	JB 	A.1, H2_3
	JB 	A.0, H1
	MOV 	P2, #03H	;0
	RET
H1:	MOV 	P2, #9FH	;1
	RET
H2_3:	JB 	A.0, H3
	MOV 	P2, #25H	;2
	RET
H3:	MOV 	P2, #0DH	;3
	RET
H4_7:	JB 	A.1, H6_7
	JB 	A.0, H5
	MOV 	P2, #99H	;4
	RET
H5:	MOV 	P2, #49H	;5
	RET
H6_7:	JB 	A.0, H7
	MOV 	P2, #41H	;6
	RET
H7:	MOV 	P2, #1FH	;7
	RET
H8_f:	JB 	A.2, Hc_f
	JB 	A.1, Ha_b
	JB 	A.0, H9
	MOV 	P2, #01H	;8
	RET
H9:	MOV 	P2, #09H	;9
	RET
Ha_b:	JB 	A.0, Hb
	MOV 	P2, #11H	;A
	RET
Hb:	MOV 	P2, #0C1H	;B
	RET
Hc_f:	JB 	P3.5, He_f
	JB 	P3.4, Hd
	MOV 	P2, #63H	;C
	RET
Hd:	MOV 	P2, #85H	;D
	RET
He_f:	JB 	A.0, Hf
	MOV 	P2, #61H	;E
	RET
Hf:	MOV 	P2, #71H	;F
	RET